metricsets: ["controllermanager"]

hosts:
{{#each hosts}}
  - {{this}}
{{/each}}
period: {{period}}

{{#if bearer_token_file}}
bearer_token_file: {{bearer_token_file}}
ssl.verification_mode: {{ssl.verification_mode}}
{{/if}}

{{#if condition }}
condition: ${kubernetes.labels.{{~controller_manager_label_key~}} } == '{{controller_manager_label_value}}' and {{ condition }}
{{ else }}
condition: ${kubernetes.labels.{{~controller_manager_label_key~}} } == '{{controller_manager_label_value}}'
{{/if}}

processors:
{{#if cluster_name}}
- add_fields:
    target: orchestrator.cluster
    fields:
      name: {{cluster_name}}
{{/if}}
{{#if processors}}
{{processors}}
{{/if}}
